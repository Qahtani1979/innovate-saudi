# Strategy Templates System - Design Document

> **Version**: 2.0  
> **Last Updated**: December 15, 2025  
> **Status**: âœ… Fully Implemented & Consistent - MoMAH Innovation Focus

## Recent Changes (v2.0)
- Added 14 official MoMAH Innovation & R&D templates covering all service domains
- All templates aligned with Saudi Vision 2030, MoMAH mandate, and Innovation priorities
- Templates cover: Digital Transformation, Smart Cities, Housing/PropTech, CleanTech, GIS, IoT, Rural, GovTech, Citizen Services
- Verified all template operations consistent with wizard data structure

---

## Table of Contents

1. [Executive Summary](#executive-summary)
2. [System Overview](#system-overview)
3. [Architecture](#architecture)
4. [Data Model](#data-model)
5. [User Workflows](#user-workflows)
6. [Component Design](#component-design)
7. [Integration with Wizard](#integration-with-wizard)
8. [Implementation Status](#implementation-status)
9. [File Structure](#file-structure)
10. [API Reference](#api-reference)
11. [Consistency with Wizard](#consistency-with-wizard)

---

## Executive Summary

The Strategy Templates System enables users to:
- **Browse** pre-built and community templates
- **Create** templates from existing strategic plans
- **Apply** templates to quickly start new plans in the wizard
- **Share** templates publicly or keep them private
- **Manage** personal template library

### Key Design Decisions

| Decision | Choice | Rationale |
|----------|--------|-----------|
| Storage | Use `strategic_plans` table with `is_template = true` | Reuse existing schema, same structure |
| Template Source | Completed plans can become templates | Ensures real-world tested templates |
| Access Control | Public/Private via `is_public` flag | Simple sharing model |
| Integration | Deep integration with wizard | Seamless user experience |

---

## System Overview

### High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Strategy Templates System                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Template        â”‚    â”‚  Template        â”‚    â”‚  Template     â”‚  â”‚
â”‚  â”‚  Library Page    â”‚    â”‚  Management      â”‚    â”‚  Application  â”‚  â”‚
â”‚  â”‚                  â”‚    â”‚                  â”‚    â”‚               â”‚  â”‚
â”‚  â”‚  â€¢ Browse        â”‚    â”‚  â€¢ Create        â”‚    â”‚  â€¢ Preview    â”‚  â”‚
â”‚  â”‚  â€¢ Search        â”‚    â”‚  â€¢ Edit          â”‚    â”‚  â€¢ Apply      â”‚  â”‚
â”‚  â”‚  â€¢ Filter        â”‚    â”‚  â€¢ Delete        â”‚    â”‚  â€¢ Clone      â”‚  â”‚
â”‚  â”‚  â€¢ Categories    â”‚    â”‚  â€¢ Share/Unshare â”‚    â”‚  â€¢ Customize  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚           â”‚                       â”‚                      â”‚          â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                   â”‚                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                    â”‚      useStrategyTemplates   â”‚                  â”‚
â”‚                    â”‚           Hook              â”‚                  â”‚
â”‚                    â”‚                             â”‚                  â”‚
â”‚                    â”‚  â€¢ fetchTemplates()         â”‚                  â”‚
â”‚                    â”‚  â€¢ fetchMyTemplates()       â”‚                  â”‚
â”‚                    â”‚  â€¢ createTemplate()         â”‚                  â”‚
â”‚                    â”‚  â€¢ updateTemplate()         â”‚                  â”‚
â”‚                    â”‚  â€¢ deleteTemplate()         â”‚                  â”‚
â”‚                    â”‚  â€¢ applyTemplate()          â”‚                  â”‚
â”‚                    â”‚  â€¢ saveAsTemplate()         â”‚                  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                   â”‚                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚                    â”‚      Supabase Database      â”‚                  â”‚
â”‚                    â”‚                             â”‚                  â”‚
â”‚                    â”‚  strategic_plans            â”‚                  â”‚
â”‚                    â”‚  WHERE is_template = true   â”‚                  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Template Lifecycle

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Strategic  â”‚     â”‚   Save as   â”‚     â”‚  Template   â”‚
â”‚    Plan     â”‚â”€â”€â”€â”€â–ºâ”‚  Template   â”‚â”€â”€â”€â”€â–ºâ”‚   Created   â”‚
â”‚ (Completed) â”‚     â”‚             â”‚     â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                          â”‚                      â”‚
                    â–¼                          â–¼                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚   Private   â”‚           â”‚   Public    â”‚        â”‚  Featured   â”‚
            â”‚  Template   â”‚           â”‚  Template   â”‚        â”‚  Template   â”‚
            â”‚             â”‚           â”‚             â”‚        â”‚  (Curated)  â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚                          â”‚                      â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                      â”‚   Applied   â”‚
                                      â”‚  to Wizard  â”‚
                                      â”‚             â”‚
                                      â”‚  Creates    â”‚
                                      â”‚  New Plan   â”‚
                                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Architecture

### Component Hierarchy

```
StrategyTemplatesPage
â”œâ”€â”€ ActivePlanBanner
â””â”€â”€ StrategyTemplateLibrary
    â”œâ”€â”€ TemplateHeader
    â”‚   â”œâ”€â”€ Search Input
    â”‚   â”œâ”€â”€ Category Filter
    â”‚   â””â”€â”€ Template Count Badge
    â”œâ”€â”€ Tabs
    â”‚   â”œâ”€â”€ Browse Tab
    â”‚   â”‚   â”œâ”€â”€ TemplateGrid
    â”‚   â”‚   â”‚   â””â”€â”€ TemplateCard (multiple)
    â”‚   â”‚   â”‚       â”œâ”€â”€ Type Icon
    â”‚   â”‚   â”‚       â”œâ”€â”€ Template Info
    â”‚   â”‚   â”‚       â”œâ”€â”€ Usage Stats
    â”‚   â”‚   â”‚       â””â”€â”€ Action Buttons
    â”‚   â”‚   â””â”€â”€ EmptyState
    â”‚   â”œâ”€â”€ My Templates Tab
    â”‚   â”‚   â”œâ”€â”€ TemplateGrid (filtered)
    â”‚   â”‚   â””â”€â”€ EmptyState with CTA
    â”‚   â””â”€â”€ Create Tab
    â”‚       â””â”€â”€ TemplateCreateForm
    â”‚           â”œâ”€â”€ Basic Info Fields
    â”‚           â”œâ”€â”€ Type Selector
    â”‚           â”œâ”€â”€ Source Plan Selector
    â”‚           â””â”€â”€ Privacy Toggle
    â”œâ”€â”€ TemplatePreviewDialog
    â”‚   â”œâ”€â”€ Template Details
    â”‚   â”œâ”€â”€ Objectives Preview
    â”‚   â”œâ”€â”€ KPIs Preview
    â”‚   â””â”€â”€ Apply Button
    â””â”€â”€ TemplateApplyDialog
        â”œâ”€â”€ Customization Options
        â”œâ”€â”€ Name Override
        â””â”€â”€ Confirm Apply
```

### Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Data Flow                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚   User Action                                                        â”‚
â”‚       â”‚                                                              â”‚
â”‚       â–¼                                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                     Template Actions                         â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚  BROWSE           APPLY              CREATE         DELETE   â”‚   â”‚
â”‚   â”‚     â”‚               â”‚                  â”‚              â”‚      â”‚   â”‚
â”‚   â”‚     â–¼               â–¼                  â–¼              â–¼      â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚ Fetch â”‚    â”‚ Clone to  â”‚      â”‚ Insert  â”‚    â”‚ Hard   â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ WHERE â”‚    â”‚ New Plan  â”‚      â”‚ WHERE   â”‚    â”‚ Delete â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ is_   â”‚    â”‚ is_temp   â”‚      â”‚ is_temp â”‚    â”‚        â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ temp  â”‚    â”‚ = false   â”‚      â”‚ = true  â”‚    â”‚        â”‚  â”‚   â”‚
â”‚   â”‚  â”‚ =true â”‚    â”‚           â”‚      â”‚         â”‚    â”‚        â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚      â”‚              â”‚                 â”‚             â”‚       â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚              â”‚                 â”‚             â”‚           â”‚
â”‚          â–¼              â–¼                 â–¼             â–¼           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                    strategic_plans                           â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â”‚   id | is_template | is_public | template_type | usage_count â”‚   â”‚
â”‚   â”‚   â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚   â”‚
â”‚   â”‚   T1 â”‚    true     â”‚   true    â”‚  innovation   â”‚     45      â”‚   â”‚
â”‚   â”‚   T2 â”‚    true     â”‚   false   â”‚  digital      â”‚     12      â”‚   â”‚
â”‚   â”‚   P1 â”‚    false    â”‚   false   â”‚    null       â”‚    null     â”‚   â”‚
â”‚   â”‚                                                              â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Model

### Database Schema (Using Existing strategic_plans)

```sql
-- Templates are stored in strategic_plans with is_template = true
-- Key fields for templates:

-- Existing columns used:
is_template        BOOLEAN DEFAULT false  -- Flag to identify templates
status             TEXT                    -- 'template' for templates

-- New columns to add:
template_type      TEXT                    -- 'innovation', 'digital', 'sustainability', etc.
template_category  TEXT                    -- 'government', 'municipal', 'sector', etc.
is_public          BOOLEAN DEFAULT false   -- Whether template is publicly visible
is_featured        BOOLEAN DEFAULT false   -- Curated/featured templates
usage_count        INTEGER DEFAULT 0       -- How many times applied
template_rating    NUMERIC(2,1)            -- Average rating (1-5)
template_reviews   INTEGER DEFAULT 0       -- Number of reviews
source_plan_id     UUID                    -- Original plan this was created from
template_tags      TEXT[]                  -- Searchable tags
```

### Template Types

| Type ID | English Name | Arabic Name | Icon | Color | MoMAH Domain |
|---------|--------------|-------------|------|-------|--------------|
| `innovation` | Innovation Strategy | Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø± | Lightbulb | Amber | Innovation Labs, R&D |
| `digital_transformation` | Digital Transformation | Ø§Ù„ØªØ­ÙˆÙ„ Ø§Ù„Ø±Ù‚Ù…ÙŠ | Zap | Blue | GovTech, Digital Permits |
| `sustainability` | Sustainability | Ø§Ù„Ø§Ø³ØªØ¯Ø§Ù…Ø© | Leaf | Green | CleanTech, Environment |
| `sector_specific` | Sector Specific | Ø®Ø§Øµ Ø¨Ø§Ù„Ù‚Ø·Ø§Ø¹ | Building2 | Purple | Industry Hubs |
| `municipality` | Municipality Scale | Ù†Ø·Ø§Ù‚ Ø§Ù„Ø¨Ù„Ø¯ÙŠØ© | Globe | Cyan | Municipal Services |
| `smart_city` | Smart City | Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ø°ÙƒÙŠØ© | Zap | Indigo | IoT, Urban Planning, GIS |
| `citizen_services` | Citizen Services | Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ù…ÙˆØ§Ø·Ù†ÙŠÙ† | Users | Rose | Rural, Digital Inclusion |

### Template Categories

| Category | Description |
|----------|-------------|
| `system` | Pre-built official MoMAH templates (14 templates) |
| `community` | User-shared public templates |
| `organization` | Organization-specific templates |
| `personal` | User's private templates |

> **Note**: `is_featured` is a separate boolean flag, not a category.

### Official MoMAH Innovation Templates (14 Total)

| Template Name | Type | Rating | MoMAH Domain |
|--------------|------|--------|--------------|
| MoMAH Innovation & R&D Excellence Strategy | `innovation` | 4.4 | Core Innovation |
| Housing Innovation & PropTech Strategy | `innovation` | 4.7 | Housing/Sakani |
| Open Innovation & Crowdsourcing for Saudi Municipalities | `innovation` | 4.7 | Citizen Co-creation |
| Digital Innovation & AI Research for Saudi Municipalities | `digital_transformation` | 4.5 | AI/ML |
| GovTech & Digital Permits Innovation Strategy | `digital_transformation` | 4.6 | Digital Permits |
| Environmental Innovation & CleanTech Strategy | `sustainability` | 4.6 | Waste/Water/Carbon |
| Green Technology R&D for Saudi Sustainable Cities | `sustainability` | 4.7 | Green Tech |
| MoMAH Sector-Specific Innovation Hubs Strategy | `sector_specific` | 4.5 | Industry Sectors |
| Saudi Municipal Innovation Ecosystem Strategy | `municipality` | 4.6 | Municipal Scale |
| Smart City Innovation & IoT Research for Saudi Urban Development | `smart_city` | 4.6 | Smart Cities |
| Urban Planning Innovation & GIS R&D Strategy | `smart_city` | 4.8 | GIS/Digital Twins |
| Infrastructure Innovation & IoT R&D Strategy | `smart_city` | 4.5 | IoT/Infrastructure |
| Citizen Experience Innovation Lab for Saudi Municipal Services | `citizen_services` | 4.8 | Citizen UX |
| Rural Innovation & Digital Inclusion Strategy | `citizen_services` | 4.4 | Rural/Inclusion |

---

## User Workflows

### Workflow 1: Browse and Apply Template

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Browse and Apply Template                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  1. User visits Template Library                                  â”‚
â”‚     â””â”€â”€â–º /strategy-templates-page                                 â”‚
â”‚                                                                   â”‚
â”‚  2. User browses/searches templates                               â”‚
â”‚     â”œâ”€â”€ Search by keyword                                         â”‚
â”‚     â”œâ”€â”€ Filter by type                                            â”‚
â”‚     â””â”€â”€ Sort by popularity/rating                                 â”‚
â”‚                                                                   â”‚
â”‚  3. User previews template                                        â”‚
â”‚     â””â”€â”€ Opens preview dialog with full details                    â”‚
â”‚                                                                   â”‚
â”‚  4. User clicks "Apply Template"                                  â”‚
â”‚     â”œâ”€â”€ Option A: Apply to new plan                               â”‚
â”‚     â”‚   â””â”€â”€ Redirect to wizard with template data pre-filled      â”‚
â”‚     â”‚       /strategic-plan-builder?template=<template_id>        â”‚
â”‚     â”‚                                                             â”‚
â”‚     â””â”€â”€ Option B: Apply to existing draft                         â”‚
â”‚         â””â”€â”€ Select draft â†’ Merge template data                    â”‚
â”‚                                                                   â”‚
â”‚  5. Wizard opens with template data                               â”‚
â”‚     â”œâ”€â”€ All steps pre-populated                                   â”‚
â”‚     â”œâ”€â”€ User can modify as needed                                 â”‚
â”‚     â””â”€â”€ Template usage_count incremented                          â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Workflow 2: Create Template from Plan

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Create Template from Plan                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  Option A: From Wizard (Step 18 - Review)                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚
â”‚  1. User completes plan in wizard                                 â”‚
â”‚  2. On Step 18, clicks "Save as Template"                         â”‚
â”‚  3. Template creation dialog opens                                â”‚
â”‚     â”œâ”€â”€ Enter template name                                       â”‚
â”‚     â”œâ”€â”€ Select template type                                      â”‚
â”‚     â”œâ”€â”€ Add description                                           â”‚
â”‚     â”œâ”€â”€ Add tags                                                  â”‚
â”‚     â””â”€â”€ Choose public/private                                     â”‚
â”‚  4. Template saved with is_template = true                        â”‚
â”‚  5. Original plan saved separately (is_template = false)          â”‚
â”‚                                                                   â”‚
â”‚  Option B: From Template Library                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚  1. User goes to Template Library â†’ Create tab                    â”‚
â”‚  2. Selects source plan from dropdown                             â”‚
â”‚  3. Fills template metadata                                       â”‚
â”‚  4. Clicks "Create Template"                                      â”‚
â”‚  5. Plan cloned as template                                       â”‚
â”‚                                                                   â”‚
â”‚  Option C: From Plan Detail Page                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚  1. User views existing plan                                      â”‚
â”‚  2. Clicks "Save as Template" action                              â”‚
â”‚  3. Same flow as Option A                                         â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Workflow 3: Manage Templates

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Manage Templates                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  My Templates Tab                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  Template Card                                               â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚ â”‚
â”‚  â”‚  â”‚  [Icon] Innovation Strategy Template                    â”‚â”‚ â”‚
â”‚  â”‚  â”‚  Description: Comprehensive municipal...                â”‚â”‚ â”‚
â”‚  â”‚  â”‚  [Private] [12 uses] [â˜… 4.5]                           â”‚â”‚ â”‚
â”‚  â”‚  â”‚                                                         â”‚â”‚ â”‚
â”‚  â”‚  â”‚  [Edit] [Preview] [Share] [Delete]                     â”‚â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                   â”‚
â”‚  Actions:                                                         â”‚
â”‚  â”œâ”€â”€ Edit: Open template in wizard (edit mode)                   â”‚
â”‚  â”œâ”€â”€ Preview: View template details                              â”‚
â”‚  â”œâ”€â”€ Share: Toggle is_public flag                                â”‚
â”‚  â”œâ”€â”€ Delete: Soft delete template                                â”‚
â”‚  â””â”€â”€ Duplicate: Clone template for modification                  â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Design

### TemplateCard Component

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”                                                   â”‚ â”‚
â”‚  â”‚  â”‚ ğŸ’¡  â”‚  Innovation Strategy Template              â˜… 4.8  â”‚ â”‚
â”‚  â”‚  â”‚     â”‚                                                   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜  Comprehensive template for municipal innovation  â”‚ â”‚
â”‚  â”‚           strategies with focus on digital transformation  â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚ â”‚
â”‚  â”‚  â”‚5 Obj     â”‚ â”‚12 KPIs   â”‚ â”‚45 uses   â”‚                   â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  By: Innovation Department                                 â”‚ â”‚
â”‚  â”‚                                                            â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚ â”‚
â”‚  â”‚  â”‚  ğŸ‘ Preview  â”‚  â”‚  ğŸ“‹ Apply Template â”‚                 â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TemplatePreviewDialog

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘                  Template Preview                          â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  ğŸ’¡ Innovation Strategy Template                           â•‘ â”‚
â”‚  â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  Description:                                              â•‘ â”‚
â”‚  â•‘  Comprehensive template for municipal innovation           â•‘ â”‚
â”‚  â•‘  strategies with focus on digital transformation...        â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘ â”‚
â”‚  â•‘  â”‚  Included Content                                    â”‚  â•‘ â”‚
â”‚  â•‘  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â•‘ â”‚
â”‚  â•‘  â”‚  âœ“ Vision & Mission statements                      â”‚  â•‘ â”‚
â”‚  â•‘  â”‚  âœ“ 5 Strategic Objectives                           â”‚  â•‘ â”‚
â”‚  â•‘  â”‚  âœ“ 12 Key Performance Indicators                    â”‚  â•‘ â”‚
â”‚  â•‘  â”‚  âœ“ SWOT Analysis framework                          â”‚  â•‘ â”‚
â”‚  â•‘  â”‚  âœ“ Stakeholder mapping                              â”‚  â•‘ â”‚
â”‚  â•‘  â”‚  âœ“ Risk assessment template                         â”‚  â•‘ â”‚
â”‚  â•‘  â”‚  âœ“ Action plan structure                            â”‚  â•‘ â”‚
â”‚  â•‘  â”‚  âœ“ Governance framework                             â”‚  â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  Statistics:                                               â•‘ â”‚
â”‚  â•‘  â€¢ Used 45 times                                           â•‘ â”‚
â”‚  â•‘  â€¢ Rating: â˜…â˜…â˜…â˜…â˜… (4.8/5)                                   â•‘ â”‚
â”‚  â•‘  â€¢ Created by: Innovation Department                       â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘ â”‚
â”‚  â•‘  â”‚           ğŸš€ Apply This Template                    â”‚   â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SaveAsTemplateDialog

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•— â”‚
â”‚  â•‘               Save Plan as Template                        â•‘ â”‚
â”‚  â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  Template Name (English) *                                 â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘ â”‚
â”‚  â•‘  â”‚ Innovation Strategy Template                          â”‚â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  Template Name (Arabic)                                    â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘ â”‚
â”‚  â•‘  â”‚ Ù‚Ø§Ù„Ø¨ Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© Ø§Ù„Ø§Ø¨ØªÙƒØ§Ø±                              â”‚â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  Template Type *                                           â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘ â”‚
â”‚  â•‘  â”‚ Innovation Strategy                              â–¼    â”‚â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  Description                                               â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘ â”‚
â”‚  â•‘  â”‚ Comprehensive template for municipal innovation       â”‚â•‘ â”‚
â”‚  â•‘  â”‚ strategies...                                         â”‚â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  Tags (comma-separated)                                    â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â•‘ â”‚
â”‚  â•‘  â”‚ innovation, digital, transformation, municipal        â”‚â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘ â”‚
â”‚  â•‘  â”‚ â˜ Make this template public (visible to everyone)   â”‚  â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â•‘ â”‚
â”‚  â•‘  â”‚   Cancel   â”‚  â”‚      ğŸ’¾ Save as Template           â”‚   â•‘ â”‚
â”‚  â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â•‘ â”‚
â”‚  â•‘                                                            â•‘ â”‚
â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Integration with Wizard

### Wizard Entry Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Wizard Entry Points                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  1. Direct URL with Template                                     â”‚
â”‚     /strategic-plan-builder?template=<template_id>               â”‚
â”‚                                                                  â”‚
â”‚  2. From Template Library "Apply" Button                         â”‚
â”‚     navigate(`/strategic-plan-builder?template=${templateId}`)   â”‚
â”‚                                                                  â”‚
â”‚  3. From Plan Selection Dialog                                   â”‚
â”‚     â””â”€â”€ "Start from Template" tab                                â”‚
â”‚         â””â”€â”€ Shows template list                                  â”‚
â”‚         â””â”€â”€ Click selects template and starts wizard             â”‚
â”‚                                                                  â”‚
â”‚  4. From Dashboard Quick Actions                                 â”‚
â”‚     â””â”€â”€ "New Plan from Template" button                          â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Template Application Flow in Wizard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Template Application in Wizard                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  URL: /strategic-plan-builder?template=template-123              â”‚
â”‚                                                                  â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ StrategyWizard  â”‚                                        â”‚
â”‚       â”‚ Wrapper         â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                â”‚                                                 â”‚
â”‚                â–¼                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ Check URL Paramsâ”‚                                        â”‚
â”‚       â”‚ template=xxx    â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                â”‚                                                 â”‚
â”‚                â–¼                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ Fetch Template  â”‚                                        â”‚
â”‚       â”‚ from Database   â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                â”‚                                                 â”‚
â”‚                â–¼                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ Transform to    â”‚                                        â”‚
â”‚       â”‚ Wizard Data     â”‚                                        â”‚
â”‚       â”‚                 â”‚                                        â”‚
â”‚       â”‚ â€¢ Copy all data â”‚                                        â”‚
â”‚       â”‚ â€¢ Clear IDs     â”‚                                        â”‚
â”‚       â”‚ â€¢ Reset dates   â”‚                                        â”‚
â”‚       â”‚ â€¢ Set mode=     â”‚                                        â”‚
â”‚       â”‚   'create'      â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                â”‚                                                 â”‚
â”‚                â–¼                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ Show Template   â”‚                                        â”‚
â”‚       â”‚ Applied Banner  â”‚                                        â”‚
â”‚       â”‚                 â”‚                                        â”‚
â”‚       â”‚ "Using template:â”‚                                        â”‚
â”‚       â”‚  Innovation..." â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                â”‚                                                 â”‚
â”‚                â–¼                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ Increment       â”‚                                        â”‚
â”‚       â”‚ usage_count     â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                â”‚                                                 â”‚
â”‚                â–¼                                                 â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚
â”‚       â”‚ Start at Step 1 â”‚                                        â”‚
â”‚       â”‚ (Pre-filled)    â”‚                                        â”‚
â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                        â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Save as Template from Wizard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚             Save as Template (Step 18)                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                  â”‚
â”‚  Step 18 Review Page                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  Review & Submit                                             â”‚â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                               â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  [All sections validated âœ“]                                  â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚â”‚
â”‚  â”‚  â”‚                    Action Buttons                     â”‚   â”‚â”‚
â”‚  â”‚  â”‚                                                       â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â”‚ Save Draft  â”‚ â”‚ Save as     â”‚ â”‚ Submit for     â”‚  â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â”‚             â”‚ â”‚ Template ğŸ“‹ â”‚ â”‚ Approval âœ“     â”‚  â”‚   â”‚â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚â”‚
â”‚  â”‚  â”‚                        â”‚                              â”‚   â”‚â”‚
â”‚  â”‚  â”‚                        â–¼                              â”‚   â”‚â”‚
â”‚  â”‚  â”‚              Opens SaveAsTemplateDialog               â”‚   â”‚â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚â”‚
â”‚  â”‚                                                              â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Implementation Status

### âœ… Completed Features

| Feature | Component/File | Status |
|---------|---------------|--------|
| Database columns | `strategic_plans` table | âœ… Complete |
| Template hooks | `useStrategyTemplates.js` | âœ… Complete |
| Template Library UI | `StrategyTemplateLibrary.jsx` | âœ… Complete |
| Template Preview | `TemplatePreviewDialog.jsx` | âœ… Complete |
| Save as Template | `SaveAsTemplateDialog.jsx` | âœ… Complete |
| Wizard Integration | `StrategyWizardWrapper.jsx` | âœ… Complete |
| URL Parameter `?template=` | Wizard wrapper | âœ… Complete |
| Template Applied Badge | Wizard header | âœ… Complete |
| Templates Tab in Dialog | `PlanSelectionDialog.jsx` | âœ… Complete |
| Public/Private Toggle | Template management | âœ… Complete |
| Template Deletion | Soft delete | âœ… Complete |
| Usage Count Tracking | `increment_template_usage` RPC | âœ… Complete |
| Template Rating System | `rate_template` RPC + UI | âœ… Complete |
| Template Rating Dialog | `TemplateRatingDialog.jsx` | âœ… Complete |
| Tag-based Search | `StrategyTemplateLibrary.jsx` | âœ… Complete |
| System/Seed Templates | 5 official templates seeded | âœ… Complete |
| Tag Filter UI | Browse tab with tag chips | âœ… Complete |

### ğŸ”„ Partially Complete

| Feature | Status | Notes |
|---------|--------|-------|
| Template Editing | ğŸ”„ 50% | Can delete/toggle, full edit pending |
| Template Categories UI | ğŸ”„ 70% | Types work, categories dropdown pending |

### â³ Pending Features

| Feature | Priority | Notes |
|---------|----------|-------|
| Template Reviews (text) | Low | Rating exists, text reviews pending |
| Template Import/Export | Low | Future enhancement |
| Featured Templates Admin | Low | Manual DB only |
| Template Versioning | Low | Future enhancement |

---

## File Structure

```
src/
â”œâ”€â”€ components/
â”‚   â””â”€â”€ strategy/
â”‚       â”œâ”€â”€ creation/
â”‚       â”‚   â””â”€â”€ StrategyTemplateLibrary.jsx    # âœ… Real DB + Tag search + Rating
â”‚       â”œâ”€â”€ templates/
â”‚       â”‚   â”œâ”€â”€ TemplatePreviewDialog.jsx      # âœ… Preview with stats
â”‚       â”‚   â”œâ”€â”€ SaveAsTemplateDialog.jsx       # âœ… Save plan as template
â”‚       â”‚   â””â”€â”€ TemplateRatingDialog.jsx       # âœ… Star rating UI
â”‚       â””â”€â”€ wizard/
â”‚           â”œâ”€â”€ StrategyWizardWrapper.jsx      # âœ… Template URL handling
â”‚           â”œâ”€â”€ PlanSelectionDialog.jsx        # âœ… Templates tab
â”‚           â””â”€â”€ steps/
â”‚               â””â”€â”€ Step8Review.jsx            # âœ… Save as Template btn
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ strategy/
â”‚       â””â”€â”€ useStrategyTemplates.js            # âœ… Updated - Full CRUD operations
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ StrategyTemplatesPage.jsx              # âœ… Existing - Uses updated library
â””â”€â”€ docs/
    â””â”€â”€ strategy/
        â”œâ”€â”€ STRATEGIC_WIZARD_DESIGN.md         # âœ… Updated
        â””â”€â”€ STRATEGY_TEMPLATES_DESIGN.md       # âœ… This document
```

---

## API Reference

### useStrategyTemplates Hook

```typescript
interface UseStrategyTemplatesReturn {
  // Data
  templates: Template[];           // All public templates
  myTemplates: Template[];         // User's templates
  featuredTemplates: Template[];   // Featured templates
  isLoading: boolean;
  error: Error | null;
  
  // Actions
  fetchTemplates: () => Promise<void>;
  fetchMyTemplates: () => Promise<void>;
  createTemplate: (data: CreateTemplateInput) => Promise<Template>;
  updateTemplate: (id: string, data: UpdateTemplateInput) => Promise<Template>;
  deleteTemplate: (id: string) => Promise<boolean>;
  applyTemplate: (id: string) => Promise<WizardData>;
  saveAsTemplate: (planData: WizardData, meta: TemplateMeta) => Promise<Template>;
  togglePublic: (id: string) => Promise<boolean>;
  incrementUsage: (id: string) => Promise<void>;
}

interface Template {
  id: string;
  name_en: string;
  name_ar: string;
  description_en: string;
  description_ar: string;
  template_type: TemplateType;
  template_category: TemplateCategory;
  is_public: boolean;
  is_featured: boolean;
  usage_count: number;
  template_rating: number;
  template_reviews: number;
  template_tags: string[];
  owner_email: string;
  created_at: string;
  // ... all strategic plan fields
}

type TemplateType = 
  | 'innovation'
  | 'digital_transformation'
  | 'sustainability'
  | 'sector_specific'
  | 'municipality'
  | 'smart_city'
  | 'citizen_services';

type TemplateCategory = 
  | 'system'
  | 'featured'
  | 'community'
  | 'organization'
  | 'personal';
```

### Database Queries

```sql
-- Fetch all public templates
SELECT * FROM strategic_plans 
WHERE is_template = true 
  AND is_public = true 
  AND is_deleted = false
ORDER BY usage_count DESC, created_at DESC;

-- Fetch user's templates
SELECT * FROM strategic_plans 
WHERE is_template = true 
  AND owner_email = :userEmail
  AND is_deleted = false
ORDER BY updated_at DESC;

-- Apply template (create new plan from template)
INSERT INTO strategic_plans (
  -- Copy all template fields except:
  id,              -- Generate new
  is_template,     -- Set to false
  usage_count,     -- Reset to null
  template_rating, -- Reset to null
  source_plan_id,  -- Set to template.id
  status,          -- Set to 'draft'
  created_at,      -- Set to now()
  updated_at       -- Set to now()
)
SELECT 
  gen_random_uuid(),
  false,
  null,
  null,
  id,
  'draft',
  now(),
  now(),
  -- ... rest of fields
FROM strategic_plans
WHERE id = :templateId;

-- Increment usage count
UPDATE strategic_plans 
SET usage_count = COALESCE(usage_count, 0) + 1
WHERE id = :templateId;

-- Save plan as template
INSERT INTO strategic_plans (
  -- Copy all plan fields plus:
  is_template,       -- Set to true
  template_type,     -- From input
  template_category, -- 'personal'
  is_public,         -- From input
  source_plan_id,    -- Original plan ID
  usage_count,       -- 0
  template_rating,   -- null
  template_tags      -- From input
)
SELECT 
  true,
  :templateType,
  'personal',
  :isPublic,
  id,
  0,
  null,
  :tags,
  -- ... rest of fields
FROM strategic_plans
WHERE id = :planId;
```

---

## Security Considerations

### RLS Policies for Templates

```sql
-- View templates: public templates visible to all, own templates visible to owner
CREATE POLICY "View templates" ON strategic_plans
FOR SELECT USING (
  is_template = true AND (
    is_public = true OR 
    owner_email = auth.jwt()->>'email'
  )
);

-- Create templates: authenticated users only
CREATE POLICY "Create templates" ON strategic_plans
FOR INSERT WITH CHECK (
  is_template = true AND
  owner_email = auth.jwt()->>'email'
);

-- Update templates: owner only
CREATE POLICY "Update own templates" ON strategic_plans
FOR UPDATE USING (
  is_template = true AND
  owner_email = auth.jwt()->>'email'
);

-- Delete templates: owner only
CREATE POLICY "Delete own templates" ON strategic_plans
FOR DELETE USING (
  is_template = true AND
  owner_email = auth.jwt()->>'email'
);
```

---

## Consistency with Wizard

### Field Mapping: Templates â†” Wizard

| Wizard Step | Template Field | Supported |
|-------------|----------------|-----------|
| 1. Context & Discovery | `name_en`, `description_en`, `start_year`, `end_year` | âœ… |
| 2. Vision & Mission | `vision_en`, `mission_en`, `core_values` | âœ… |
| 3. Stakeholder Analysis | `stakeholders` | âœ… |
| 4. PESTEL Analysis | `pestel` | âœ… |
| 5. SWOT Analysis | `swot` | âœ… |
| 6. Scenario Planning | `scenarios` | âœ… |
| 7. Risk Assessment | `risks` | âœ… |
| 8. Dependencies | `dependencies`, `constraints` | âœ… |
| 9. Strategic Objectives | `objectives` | âœ… |
| 10. National Alignment | `national_alignments` | âœ… |
| 11. KPIs & Metrics | `kpis` | âœ… |
| 12. Action Plans | `action_plans` | âœ… |
| 13. Resource Planning | `resource_plan` | âœ… |
| 14. Timeline & Milestones | `milestones`, `phases` | âœ… |
| 15. Governance Structure | `governance` | âœ… |
| 16. Communication Plan | `communication_plan` | âœ… |
| 17. Change Management | `change_management` | âœ… |
| 18. Review & Submit | N/A | N/A |

### Verified Integration Points

- âœ… **Template Apply**: Uses `?template=<id>` URL parameter (clears after apply)
- âœ… **Save as Template**: Available in Step 18 via `SaveAsTemplateDialog`
- âœ… **Template Preview**: Shows all 17 step data sections in tabbed UI
- âœ… **Template Rating**: Star rating with RPC `rate_template`
- âœ… **Usage Tracking**: RPC `increment_template_usage` called on apply
- âœ… **Tag Search**: `searchByTags()` function in hook + UI filter
- âœ… **Category Filter**: Filter by template category (system, personal, etc.)
- âœ… **Template Clone**: Duplicate templates with `cloneTemplate()` function
- âœ… **Official Templates**: 5 system templates seeded in database
- âœ… **Centralized Types**: `src/constants/strategyTemplateTypes.js` single source

### Centralized Constants

All template types and categories are defined in a single file:

```
src/constants/strategyTemplateTypes.js
â”œâ”€â”€ STRATEGY_TEMPLATE_TYPES[]  - Type definitions with icons/colors
â”œâ”€â”€ TEMPLATE_CATEGORIES[]      - Category definitions
â”œâ”€â”€ getTemplateTypeInfo()      - Helper to get type info
â””â”€â”€ getTemplateCategoryInfo()  - Helper to get category info
```

### File Cross-References

| Templates Module | Wizard Module |
|------------------|---------------|
| `StrategyTemplateLibrary.jsx` | `StrategyWizardWrapper.jsx` |
| `SaveAsTemplateDialog.jsx` | Step 18 (Review) |
| `TemplatePreviewDialog.jsx` | All 18 step data |
| `TemplateRatingDialog.jsx` | N/A |
| `useStrategyTemplates.js` | `useAutoSaveDraft.js`, `useWizardValidation.js` |
| `strategyTemplateTypes.js` | Shared by all template components |

### Wizard Validation Integration

The wizard now validates required fields before navigation:

- **Step 1**: Requires `name_en`
- **Step 2**: Requires `vision_en`, `mission_en`
- **Steps 3+**: Recommended but not enforced

---

*Document generated by Strategic Planning System v1.5*

---

## Changelog

### v2.0 (Dec 15, 2025)
- Added 14 official MoMAH Innovation & R&D templates
- All templates aligned with Saudi Vision 2030 and MoMAH mandate
- Template domains: Housing/PropTech, CleanTech, GIS, IoT, Rural, GovTech, Citizen Services
- Updated documentation with complete template inventory
- Added MoMAH domain mapping for each template type

### v1.8 (Dec 15, 2025)
- Verified all template operations consistent with wizard data structure
- Confirmed hard delete for templates (no `is_deleted` column dependency)
- All template-to-wizard field mappings validated

### v1.5 (Dec 15, 2025)
- Fixed nested object detection for `resource_plan`, `governance`, `communication_plan`, `change_management`
- Removed `featured` from TEMPLATE_CATEGORIES (it's a boolean flag)
- Added National Alignment and Timeline sections to TemplatePreviewDialog
- Improved `hasStepData` detection for complex nested structures

### v1.4 (Dec 15, 2025)
- Added category filter UI
- Implemented template cloning
- Centralized type constants

### v1.3 (Dec 15, 2025)
- Initial full implementation

*Document maintained by MoMAH Strategic Planning System*
